{"title":"树莓派家庭宽带内网穿透","uid":"78b1b1fd98036cc5c20194494c7acf61","slug":"raspberrypi-intranet-penetration","date":"2020-12-27T13:47:22.000Z","updated":"2023-08-27T15:45:13.263Z","comments":true,"path":"api/articles/raspberrypi-intranet-penetration.json","keywords":null,"cover":"https://images.unsplash.com/photo-1520869562399-e772f042f422?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=MnwxfDB8MXxyYW5kb218MHx8bmV0d29ya3x8fHx8fDE2OTMxNTAyNzc&ixlib=rb-4.0.3&q=80&utm_campaign=api-credit&utm_medium=referral&utm_source=unsplash_source&w=1080","content":"<p>突然发现我在家里的树莓派不通了，回家一看，原来是电信把公网IP给回收了，emmmm，无奈，使用vps做一下内网穿透(博客迁移，图片丢失～)。</p>\n<h1 id=\"准备环境\"><a href=\"#准备环境\" class=\"headerlink\" title=\"准备环境\"></a>准备环境</h1><p>1、树莓派（可连接互联网）</p>\n<p>2、VPS（这里使用腾讯轻应用服务器，系统Ubuntu）</p>\n<h1 id=\"服务端配置\"><a href=\"#服务端配置\" class=\"headerlink\" title=\"服务端配置\"></a>服务端配置</h1><p>1、从GitHub下载软件</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">wget https:&#x2F;&#x2F;github.com&#x2F;fatedier&#x2F;frp&#x2F;releases&#x2F;download&#x2F;v0.34.3&#x2F;frp_0.34.3_freebsd_amd64.tar.gz</code></pre>\n<p>2、解压包</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">tar vxf frp_0.34.3_freebsd_amd64.tar.gz</code></pre>\n<p>3、修改配置文件（frps.ini）</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">bind_port &#x3D; 7000\n#客户端连接端口\ndashboard_port&#x3D;7500\n#WEB页面端口\ndashboard_user&#x3D;user\n#WEB端用户名\ndashboard_pwd&#x3D;pass\n#WEB端密码\nauthentication_method&#x3D;token\ntoken&#x3D;*****#客户端连接token</code></pre>\n<p>3、保存配置文件并配置VPS防火墙规则，放行相关端口</p>\n<p>4、启动服务程序</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">.&#x2F;frps -c frps.ini#前台启动，关闭终端会停止服务\nnohup .&#x2F;frps -c frps.ini &amp; #后台启动服务</code></pre>\n<h3 id=\"配置客户端\"><a href=\"#配置客户端\" class=\"headerlink\" title=\"配置客户端\"></a>配置客户端</h3><p>1、从GitHub下载软件（注意树莓派的架构为arm）</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">sudo wget https:&#x2F;&#x2F;github.com&#x2F;fatedier&#x2F;frp&#x2F;releases&#x2F;download&#x2F;v0.34.3&#x2F;frp_0.34.3_linux_arm.tar.gz</code></pre>\n<p>2、解压包</p>\n<p>3、修改客户端配置文件（frpc.ini）</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">server_addr &#x3D; xx.xx.xx.xx#服务器地址\nserver_port &#x3D; 7000\n#服务器端口\ntoken &#x3D; *****#服务器token\n \n#需要映射的端口\n[ssh]\ntype &#x3D; tcp\nlocal_ip &#x3D; 127.0.0.1\n#内网地址\nlocal_port &#x3D; 22\n#本地端口\nremote_port &#x3D; 7022#远程端口</code></pre>\n<p>4、启动并测试，注意软件架构不对是无法运行的</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">.&#x2F;frpc -c frpc.ini</code></pre>\n<p>5、配置客户端开机自启</p>\n<p>创建文件“&#x2F;etc&#x2F;systemd&#x2F;system&#x2F;frpc.service”，添加以下内容</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">[Fusion]\nDescription&#x3D;Frp Server\nAfter&#x3D;syslog.target network.target\nWants&#x3D;network.target\n \n[Service]\nType&#x3D;simple\nExecStart&#x3D;&#x2F;bin&#x2F;frp_0.34.3_linux_arm&#x2F;frpc -c &#x2F;bin&#x2F;frp_0.34.3_linux_arm&#x2F;frpc.ini\nExecStop&#x3D;&#x2F;usr&#x2F;bin&#x2F;killall frpc\n#启动失败1分钟后再次启动\nRestartSec&#x3D;1min\nKillMode&#x3D;control-group\n#重启控制，总是重启\nRestart&#x3D;always\n \n[Install]\nWantedBy&#x3D;multi-user.target</code></pre>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">sudo systemctl enable frpc.service#开机自启\nsudo systemctl start frpc.service#启动服务\nsudo systemctl status frpc.service#查看状态</code></pre>\n","text":"突然发现我在家里的树莓派不通了，回家一看，原来是电信把公网IP给回收了，emmmm，无奈，使用vps做一下内网穿透(博客迁移，图片丢失～)。 准备环境1、树莓派...","link":"","photos":[],"count_time":{"symbolsCount":"1.7k","symbolsTime":"2 mins."},"categories":[{"name":"记录","slug":"记录","count":2,"path":"api/categories/记录.json"},{"name":"内网穿透","slug":"记录/内网穿透","count":1,"path":"api/categories/记录/内网穿透.json"}],"tags":[{"name":"树莓派","slug":"树莓派","count":1,"path":"api/tags/树莓派.json"},{"name":"内网穿透","slug":"内网穿透","count":1,"path":"api/tags/内网穿透.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#%E5%87%86%E5%A4%87%E7%8E%AF%E5%A2%83\"><span class=\"toc-text\">准备环境</span></a></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#%E6%9C%8D%E5%8A%A1%E7%AB%AF%E9%85%8D%E7%BD%AE\"><span class=\"toc-text\">服务端配置</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E9%85%8D%E7%BD%AE%E5%AE%A2%E6%88%B7%E7%AB%AF\"><span class=\"toc-text\">配置客户端</span></a></li></ol></li></ol></li></ol>","author":{"name":"Pa2sw0rd","slug":"blog-author","avatar":"http://static.pa2sw0rd.cn/static/images/pa2sw0rd.webp","link":"/","description":"一位正在重塑知识的技术人 <br /> @ <b>公众号：Pa2sw0rd</b>","socials":{"github":"https://github.com/Pa2sw0rd","twitter":"https://twitter.com/pa2sword","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{"bilibili":{"icon":"/svg/bilibili.svg","link":"https://live.bilibili.com/22619211"},"douyin":{"icon":"/svg/douyin.svg","link":"https://www.douyin.com/user/MS4wLjABAAAA-Ohh-uecs-fV_2dHQpkNPD8KUHel_Mzuok9jyxBAJmM"}}}},"mapped":true,"hidden":false,"prev_post":{"title":"Android无需脱壳/逆向抓取加密包","uid":"67d8ae1d1f1daed3c8c63c2c5fb3c2f3","slug":"android-not-unpack-packet","date":"2021-06-24T06:25:12.000Z","updated":"2023-08-27T15:45:10.348Z","comments":true,"path":"api/articles/android-not-unpack-packet.json","keywords":null,"cover":"https://images.unsplash.com/photo-1518670309426-6643a938d2a9?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=MnwxfDB8MXxyYW5kb218MHx8YW5kcm9pZHx8fHx8fDE2OTMxNTA1MzA&ixlib=rb-4.0.3&q=80&utm_campaign=api-credit&utm_medium=referral&utm_source=unsplash_source&w=1080","text":"环境准备1、夜神安卓模拟器（Android版本5.1.1） 2、Xposed框架（应用商店即可下载） 3、Xserver（https://github.com/...","link":"","photos":[],"count_time":{"symbolsCount":328,"symbolsTime":"1 mins."},"categories":[{"name":"安全","slug":"安全","count":7,"path":"api/categories/安全.json"},{"name":"环境搭建","slug":"安全/环境搭建","count":1,"path":"api/categories/安全/环境搭建.json"},{"name":"环境搭建","slug":"环境搭建","count":2,"path":"api/categories/环境搭建.json"},{"name":"抓包","slug":"环境搭建/抓包","count":1,"path":"api/categories/环境搭建/抓包.json"}],"tags":[{"name":"Android","slug":"Android","count":1,"path":"api/tags/Android.json"},{"name":"抓包","slug":"抓包","count":1,"path":"api/tags/抓包.json"}],"author":{"name":"Pa2sw0rd","slug":"blog-author","avatar":"http://static.pa2sw0rd.cn/static/images/pa2sw0rd.webp","link":"/","description":"一位正在重塑知识的技术人 <br /> @ <b>公众号：Pa2sw0rd</b>","socials":{"github":"https://github.com/Pa2sw0rd","twitter":"https://twitter.com/pa2sword","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{"bilibili":{"icon":"/svg/bilibili.svg","link":"https://live.bilibili.com/22619211"},"douyin":{"icon":"/svg/douyin.svg","link":"https://www.douyin.com/user/MS4wLjABAAAA-Ohh-uecs-fV_2dHQpkNPD8KUHel_Mzuok9jyxBAJmM"}}}}},"next_post":{"title":"实验室管理系统的渗透测试","uid":"43146c96a367affc1b1b33406c790325","slug":"laboratory-managesystem-pentest","date":"2020-11-01T11:32:38.000Z","updated":"2023-08-27T15:45:16.384Z","comments":true,"path":"api/articles/laboratory-managesystem-pentest.json","keywords":null,"cover":"https://images.unsplash.com/photo-1542831371-d531d36971e6?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=MnwxfDB8MXxyYW5kb218MHx8aGFja2VyfHx8fHx8MTY5MzE0OTg2NA&ixlib=rb-4.0.3&q=80&utm_campaign=api-credit&utm_medium=referral&utm_source=unsplash_source&w=1080","text":"本来打算在web页面找漏洞，发现并不是很好找，因为是内网服务器，于是直接扫描目标开放端口(博客迁移，图片丢失～) 其中8080是给用户的一个页面，普通用户可以登...","link":"","photos":[],"count_time":{"symbolsCount":438,"symbolsTime":"1 mins."},"categories":[{"name":"安全","slug":"安全","count":7,"path":"api/categories/安全.json"},{"name":"渗透测试","slug":"安全/渗透测试","count":2,"path":"api/categories/安全/渗透测试.json"},{"name":"渗透测试","slug":"渗透测试","count":2,"path":"api/categories/渗透测试.json"},{"name":"web","slug":"渗透测试/web","count":1,"path":"api/categories/渗透测试/web.json"}],"tags":[{"name":"渗透测试","slug":"渗透测试","count":2,"path":"api/tags/渗透测试.json"}],"author":{"name":"Pa2sw0rd","slug":"blog-author","avatar":"http://static.pa2sw0rd.cn/static/images/pa2sw0rd.webp","link":"/","description":"一位正在重塑知识的技术人 <br /> @ <b>公众号：Pa2sw0rd</b>","socials":{"github":"https://github.com/Pa2sw0rd","twitter":"https://twitter.com/pa2sword","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{"bilibili":{"icon":"/svg/bilibili.svg","link":"https://live.bilibili.com/22619211"},"douyin":{"icon":"/svg/douyin.svg","link":"https://www.douyin.com/user/MS4wLjABAAAA-Ohh-uecs-fV_2dHQpkNPD8KUHel_Mzuok9jyxBAJmM"}}}}}}